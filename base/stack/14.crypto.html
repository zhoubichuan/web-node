<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>十四.crypto | Node学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-node/assets/css/0.styles.ac807ce4.css" as="style"><link rel="preload" href="/web-node/assets/js/app.31e349f9.js" as="script"><link rel="preload" href="/web-node/assets/js/2.cae3d5ca.js" as="script"><link rel="preload" href="/web-node/assets/js/3.e73902ef.js" as="script"><link rel="prefetch" href="/web-node/assets/js/10.0753f7a2.js"><link rel="prefetch" href="/web-node/assets/js/11.77d58f1b.js"><link rel="prefetch" href="/web-node/assets/js/12.21b0372c.js"><link rel="prefetch" href="/web-node/assets/js/13.51a6fe97.js"><link rel="prefetch" href="/web-node/assets/js/14.a63f2469.js"><link rel="prefetch" href="/web-node/assets/js/15.1737c125.js"><link rel="prefetch" href="/web-node/assets/js/16.ea2ff665.js"><link rel="prefetch" href="/web-node/assets/js/17.2342daea.js"><link rel="prefetch" href="/web-node/assets/js/18.d7826558.js"><link rel="prefetch" href="/web-node/assets/js/19.19dad404.js"><link rel="prefetch" href="/web-node/assets/js/20.548a0b97.js"><link rel="prefetch" href="/web-node/assets/js/21.31e46ad3.js"><link rel="prefetch" href="/web-node/assets/js/22.bba2c516.js"><link rel="prefetch" href="/web-node/assets/js/23.eaa472a1.js"><link rel="prefetch" href="/web-node/assets/js/24.685c1cb1.js"><link rel="prefetch" href="/web-node/assets/js/25.d7929429.js"><link rel="prefetch" href="/web-node/assets/js/26.7cf1bbbd.js"><link rel="prefetch" href="/web-node/assets/js/27.2e1a8e31.js"><link rel="prefetch" href="/web-node/assets/js/28.b0ec6289.js"><link rel="prefetch" href="/web-node/assets/js/29.5d20903a.js"><link rel="prefetch" href="/web-node/assets/js/30.d7e97e75.js"><link rel="prefetch" href="/web-node/assets/js/31.146dd6c5.js"><link rel="prefetch" href="/web-node/assets/js/32.6f70a982.js"><link rel="prefetch" href="/web-node/assets/js/33.94d9ac75.js"><link rel="prefetch" href="/web-node/assets/js/34.0b991e8e.js"><link rel="prefetch" href="/web-node/assets/js/35.cc2f51ff.js"><link rel="prefetch" href="/web-node/assets/js/36.22a209b4.js"><link rel="prefetch" href="/web-node/assets/js/37.c3041211.js"><link rel="prefetch" href="/web-node/assets/js/38.928a491f.js"><link rel="prefetch" href="/web-node/assets/js/39.538a4478.js"><link rel="prefetch" href="/web-node/assets/js/4.b1245107.js"><link rel="prefetch" href="/web-node/assets/js/40.9a4a31fc.js"><link rel="prefetch" href="/web-node/assets/js/41.734c4d5a.js"><link rel="prefetch" href="/web-node/assets/js/42.d717bf22.js"><link rel="prefetch" href="/web-node/assets/js/43.12971273.js"><link rel="prefetch" href="/web-node/assets/js/44.fea59d0c.js"><link rel="prefetch" href="/web-node/assets/js/45.0681ff56.js"><link rel="prefetch" href="/web-node/assets/js/46.141cc57d.js"><link rel="prefetch" href="/web-node/assets/js/47.8461583b.js"><link rel="prefetch" href="/web-node/assets/js/48.ba92eab5.js"><link rel="prefetch" href="/web-node/assets/js/49.4f9865e4.js"><link rel="prefetch" href="/web-node/assets/js/5.08124df2.js"><link rel="prefetch" href="/web-node/assets/js/50.33c28a13.js"><link rel="prefetch" href="/web-node/assets/js/51.9523fcc5.js"><link rel="prefetch" href="/web-node/assets/js/52.55ae8a0c.js"><link rel="prefetch" href="/web-node/assets/js/53.1c2d0276.js"><link rel="prefetch" href="/web-node/assets/js/54.9c61d723.js"><link rel="prefetch" href="/web-node/assets/js/55.0262bba9.js"><link rel="prefetch" href="/web-node/assets/js/56.34bee31c.js"><link rel="prefetch" href="/web-node/assets/js/57.6fe00218.js"><link rel="prefetch" href="/web-node/assets/js/58.1ff3564a.js"><link rel="prefetch" href="/web-node/assets/js/59.f0cfd191.js"><link rel="prefetch" href="/web-node/assets/js/6.0c7aea19.js"><link rel="prefetch" href="/web-node/assets/js/60.59233a4b.js"><link rel="prefetch" href="/web-node/assets/js/61.a3161654.js"><link rel="prefetch" href="/web-node/assets/js/62.185a05d8.js"><link rel="prefetch" href="/web-node/assets/js/63.ba0e1c4d.js"><link rel="prefetch" href="/web-node/assets/js/64.e003cd4d.js"><link rel="prefetch" href="/web-node/assets/js/65.57231d09.js"><link rel="prefetch" href="/web-node/assets/js/66.50dbfba1.js"><link rel="prefetch" href="/web-node/assets/js/67.f8d47c6d.js"><link rel="prefetch" href="/web-node/assets/js/68.b418365c.js"><link rel="prefetch" href="/web-node/assets/js/69.503487e9.js"><link rel="prefetch" href="/web-node/assets/js/7.5bef8b63.js"><link rel="prefetch" href="/web-node/assets/js/70.19811c90.js"><link rel="prefetch" href="/web-node/assets/js/71.c5d9f2a0.js"><link rel="prefetch" href="/web-node/assets/js/72.aedc505d.js"><link rel="prefetch" href="/web-node/assets/js/73.78102845.js"><link rel="prefetch" href="/web-node/assets/js/74.9377d752.js"><link rel="prefetch" href="/web-node/assets/js/75.e16801c6.js"><link rel="prefetch" href="/web-node/assets/js/76.257d3f3e.js"><link rel="prefetch" href="/web-node/assets/js/77.1d0e9f1e.js"><link rel="prefetch" href="/web-node/assets/js/78.0580cbde.js"><link rel="prefetch" href="/web-node/assets/js/79.738193cb.js"><link rel="prefetch" href="/web-node/assets/js/8.3bf99fe8.js"><link rel="prefetch" href="/web-node/assets/js/80.2945b286.js"><link rel="prefetch" href="/web-node/assets/js/81.76b5f877.js"><link rel="prefetch" href="/web-node/assets/js/82.8a42380a.js"><link rel="prefetch" href="/web-node/assets/js/83.e3cefe96.js"><link rel="prefetch" href="/web-node/assets/js/84.f0eb6fef.js"><link rel="prefetch" href="/web-node/assets/js/85.46e194dd.js"><link rel="prefetch" href="/web-node/assets/js/86.2631c99f.js"><link rel="prefetch" href="/web-node/assets/js/87.85fe030a.js"><link rel="prefetch" href="/web-node/assets/js/88.bc69834a.js"><link rel="prefetch" href="/web-node/assets/js/89.9b6c9d5b.js"><link rel="prefetch" href="/web-node/assets/js/9.63d8e844.js">
    <link rel="stylesheet" href="/web-node/assets/css/0.styles.ac807ce4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-node/" class="home-link router-link-active"><!----> <span class="site-name">Node学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/base/stack/1.node.html" class="nav-link">
    一.node
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/oop/1.objectOriented.html" class="nav-link">
    二.面向对象程序设计
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/3.browser/1.browser.html" class="nav-link">
    三.浏览器渲染机制
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/dom/1.event.html" class="nav-link">
    四.DOM事件及设计模式
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/es6/1.let.html" class="nav-link">
    五.ES6+核心源码分析
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/websocket/1.index.html" class="nav-link">
    六.websocket
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/senior/http/1.http.html" class="nav-link">
    一.计算机网络
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/network/1.network.html" class="nav-link">
    二.network
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/cookie/1.cookie.html" class="nav-link">
    三.cookie &amp;&amp; session
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/security/1.xss.html" class="nav-link">
    四.安全防范
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/serverless/1.index.html" class="nav-link">
    五.Serverless
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/graphql/1.index.html" class="nav-link">
    六.GraphQL
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读书籍" class="dropdown-title"><span class="title">阅读书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读书籍" class="mobile-dropdown-title"><span class="title">阅读书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/read/book1/1.preparation.html" class="nav-link">
    一.Node.js 开发指南
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book2/1.preparation.html" class="nav-link">
    二.了不起的 Node.js
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book3/1.preparation.html" class="nav-link">
    三.Node.js 实战
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book4/1.preparation.html" class="nav-link">
    四.深入浅出 Node.js
  </a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-node" target="_blank" rel="noopener noreferrer" class="repo-link">
      查看源码
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/base/stack/1.node.html" class="nav-link">
    一.node
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/oop/1.objectOriented.html" class="nav-link">
    二.面向对象程序设计
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/3.browser/1.browser.html" class="nav-link">
    三.浏览器渲染机制
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/dom/1.event.html" class="nav-link">
    四.DOM事件及设计模式
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/es6/1.let.html" class="nav-link">
    五.ES6+核心源码分析
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/base/websocket/1.index.html" class="nav-link">
    六.websocket
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/senior/http/1.http.html" class="nav-link">
    一.计算机网络
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/network/1.network.html" class="nav-link">
    二.network
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/cookie/1.cookie.html" class="nav-link">
    三.cookie &amp;&amp; session
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/security/1.xss.html" class="nav-link">
    四.安全防范
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/serverless/1.index.html" class="nav-link">
    五.Serverless
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/senior/graphql/1.index.html" class="nav-link">
    六.GraphQL
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读书籍" class="dropdown-title"><span class="title">阅读书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="阅读书籍" class="mobile-dropdown-title"><span class="title">阅读书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-node/read/book1/1.preparation.html" class="nav-link">
    一.Node.js 开发指南
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book2/1.preparation.html" class="nav-link">
    二.了不起的 Node.js
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book3/1.preparation.html" class="nav-link">
    三.Node.js 实战
  </a></li><li class="dropdown-item"><!----> <a href="/web-node/read/book4/1.preparation.html" class="nav-link">
    四.深入浅出 Node.js
  </a></li></ul></div></div> <a href="https://github.com/zhoubichuan/web-node" target="_blank" rel="noopener noreferrer" class="repo-link">
      查看源码
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/web-node/base/stack/1.node.html" class="sidebar-link">一. Node</a></li><li><a href="/web-node/base/stack/2.install.html" class="sidebar-link">二.Node.js 安装</a></li><li><a href="/web-node/base/stack/3.repl.html" class="sidebar-link">三.REPL</a></li><li><a href="/web-node/base/stack/4.core.html" class="sidebar-link">四.core</a></li><li><a href="/web-node/base/stack/5.module.html" class="sidebar-link">五.module 和 npm</a></li><li><a href="/web-node/base/stack/6.encoding.html" class="sidebar-link">六.Encoding</a></li><li><a href="/web-node/base/stack/7.buffer.html" class="sidebar-link">七.buffer</a></li><li><a href="/web-node/base/stack/8.fs.html" class="sidebar-link">八.fs</a></li><li><a href="/web-node/base/stack/9.stream.html" class="sidebar-link">九.Stream</a></li><li><a href="/web-node/base/stack/10.cache.html" class="sidebar-link">十.cache</a></li><li><a href="/web-node/base/stack/11.tcp.html" class="sidebar-link">十一.tcp</a></li><li><a href="/web-node/base/stack/12.yargs.html" class="sidebar-link">十二.yargs</a></li><li><a href="/web-node/base/stack/13.compress.html" class="sidebar-link">十三.compress</a></li><li><a href="/web-node/base/stack/14.crypto.html" aria-current="page" class="active sidebar-link">十四.crypto</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#散列-哈希-算法" class="sidebar-link">散列（哈希）算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_1-1-获取所有的散列算法" class="sidebar-link">1.1 获取所有的散列算法</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_1-2-语法说明" class="sidebar-link">1.2 语法说明</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_1-3-散列算法示例" class="sidebar-link">1.3 散列算法示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_2-hmac-算法" class="sidebar-link">2.HMAC 算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_2-1-语法" class="sidebar-link">2.1 语法</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_2-2-生成私钥" class="sidebar-link">2.2 生成私钥</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_2-3-示例" class="sidebar-link">2.3 示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_3-对称加密" class="sidebar-link">3.对称加密</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_4-非对称加密算法" class="sidebar-link">4.非对称加密算法</a></li><li class="sidebar-sub-header"><a href="/web-node/base/stack/14.crypto.html#_5-签名" class="sidebar-link">5.签名</a></li></ul></li><li><a href="/web-node/base/stack/15.process.html" class="sidebar-link">十五.process</a></li><li><a href="/web-node/base/stack/16.action.html" class="sidebar-link">十六.action</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="十四-crypto"><a href="#十四-crypto" class="header-anchor">#</a> 十四.crypto</h1> <p><code>crypto</code>是<code>node.js</code>中实现加密和解密的模块，在<code>node.js</code>中，使用<code>OpenSSL</code>类库作为内部实现加密解密的手段<code>OpenSSL</code>是一个经过严格测试的可靠的加密与解密算法的实现工具</p> <h2 id="散列-哈希-算法"><a href="#散列-哈希-算法" class="header-anchor">#</a> 散列（哈希）算法</h2> <p>散列算法也叫哈希算法，用来把任意长度的输入变成固定长度的输出，常见的有<code>md5</code>,<code>sha1</code>等</p> <ul><li>相同的输入会产生相同的输出</li> <li>不同的输出会产生不同的输出</li> <li>任意的输入长度输出的长度时相同的</li> <li>不能从输出推算出输入的值</li></ul> <p><img src="/web-node/assets/img/14.93f8293a.jpg" alt=""></p> <h3 id="_1-1-获取所有的散列算法"><a href="#_1-1-获取所有的散列算法" class="header-anchor">#</a> 1.1 获取所有的散列算法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>crypto<span class="token punctuation">.</span><span class="token function">getHashes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-2-语法说明"><a href="#_1-2-语法说明" class="header-anchor">#</a> 1.2 语法说明</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span>algorithm<span class="token punctuation">)</span> <span class="token comment">// 创建HASH对象</span>
hash<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span>input_encoding<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 增加要添加摘要的数据，摘要输出前可以使用多次update</span>
hash<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token punctuation">[</span>encoding<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 输出摘要内容，输出后则不能再添加摘要内容</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-3-散列算法示例"><a href="#_1-3-散列算法示例" class="header-anchor">#</a> 1.3 散列算法示例</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;crypto&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> md5 <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&quot;md5&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 返回哈希算法</span>
<span class="token keyword">var</span> md5Sum <span class="token operator">=</span> md5<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 指定要摘要的原始内容，可以在摘要被输出之前使用多次update方法来添加摘要内容</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> md5Sum<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 输出摘要，在使用digest方法之后不能再向hash对象追加摘要内容</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>多次 update</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> shasum <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&quot;sha1&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 返回sha1哈希算法</span>
<span class="token keyword">var</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot; ./readme.txt&quot;</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shasum<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// 指定要摘要的原始内容，可以在摘要被输出之前使用多次update方法类添加摘要内容</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> shasum<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span> <span class="token comment">//摘要输出，在使用digest方法之后不能再向hash对象追加摘要内容</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_2-hmac-算法"><a href="#_2-hmac-算法" class="header-anchor">#</a> 2.HMAC 算法</h2> <p>HMAC 算法将散列算法与一个密钥结合在一起，以组织对签名完整性的破坏</p> <p><img src="/web-node/assets/img/14.2.9ea5394f.gif" alt=""></p> <h3 id="_2-1-语法"><a href="#_2-1-语法" class="header-anchor">#</a> 2.1 语法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> hmac <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span>algorithm<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
hmac<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>algorithm 是一个可用的摘要算法，例如 sha1、md5、sha256</li> <li>key 为一个字符串，用于指定一个 PEM 格式的密钥</li></ul> <h3 id="_2-2-生成私钥"><a href="#_2-2-生成私钥" class="header-anchor">#</a> 2.2 生成私钥</h3> <p>PEM 时 OpenSSL 的标准格式，OpenSSL 使用 PEM 文件格式存储证书和密钥，是基于 Base64 编码的证书</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>openssl genrsa -out rsa_private.key <span class="token number">1024</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-示例"><a href="#_2-3-示例" class="header-anchor">#</a> 2.3 示例</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> pem <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./rsa_private.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> key <span class="token operator">=</span> pem<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> hmac <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">&quot;sha1&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hmac<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> hmac<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_3-对称加密"><a href="#_3-对称加密" class="header-anchor">#</a> 3.对称加密</h2> <ul><li>blowfish 算法是一种对称的加密算法，对称的意思就是加密和解密使用的是同一个密钥
<img src="/web-node/assets/img/14.3.71eedd90.jpg" alt=""></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;crypto&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
<span class="token keyword">let</span> cipher <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createCipher</span><span class="token punctuation">(</span>
  <span class="token string">&quot;blowfish&quot;</span><span class="token punctuation">,</span>
  fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;rsa_private.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">let</span> encry <span class="token operator">=</span> cipher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span>
encry <span class="token operator">+=</span> cipher<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>encry<span class="token punctuation">)</span>
<span class="token keyword">let</span> deciper <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createDecipher</span><span class="token punctuation">(</span>
  <span class="token string">&quot;blowfish&quot;</span><span class="token punctuation">,</span>
  fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;rsa_private.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">let</span> deEncry <span class="token operator">=</span> deciper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>encry<span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span>
deEncry <span class="token operator">+=</span> deciper<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deEncry<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_4-非对称加密算法"><a href="#_4-非对称加密算法" class="header-anchor">#</a> 4.非对称加密算法</h2> <ul><li>非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）</li> <li>公钥与私钥是一对，如果用公钥对数据进行加密，只有用对应的私钥才能解密，如果用私钥加密，只能公钥解密</li> <li>因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法</li></ul> <p><img src="/web-node/assets/img/14.4.f809b632.jpg" alt=""></p> <p>为私钥创建公钥</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>openssl rsa -in rsa_private.key -pubout -out rsa_public.key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;crypto&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> key <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;rsa_private.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> secret <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">publicEncrypt</span><span class="token punctuation">(</span>cert<span class="token punctuation">,</span> buffer<span class="token punctuation">)</span> <span class="token comment">//公钥加密</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">privateDecrypt</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> secret<span class="token punctuation">)</span> <span class="token comment">// 私钥解密</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-签名"><a href="#_5-签名" class="header-anchor">#</a> 5.签名</h2> <p>在网络中，私钥的拥有者可以在一段数据被发送之前先对数据进行<code>签名</code>得到一个签名，通过网络把此数据发送给数据接收者之后，数据的接收者可以通过<code>公钥</code>来对该签名进行验证，以确保这段数据是私钥的拥有者所发出的原始数据，并且在网络中的传输过程中未被修改</p> <p><img src="data:image/gif;base64,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" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token keyword">private</span> <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;rsa_private.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token keyword">public</span> <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;rsa_public.key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ascii&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;abcd&quot;</span>
<span class="token keyword">let</span> sign <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createSign</span><span class="token punctuation">(</span><span class="token string">&quot;RSA_SHA256&quot;</span><span class="token punctuation">)</span>
sign<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token keyword">let</span> signed <span class="token operator">=</span> sign<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token keyword">private</span><span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> verify <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createVerify</span><span class="token punctuation">(</span><span class="token string">&quot;RSA-SHA256&quot;</span><span class="token punctuation">)</span>
verify<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token keyword">let</span> verifyResult <span class="token operator">=</span> verify<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token keyword">public</span><span class="token punctuation">,</span> signed<span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhoubichuan/web-node/edit/master/src/base/stack/14.crypto.md" target="_blank" rel="noopener noreferrer">在github上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/7/5 16:15:36</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/web-node/base/stack/13.compress.html" class="prev">
          十三.compress
        </a></span> <span class="next"><a href="/web-node/base/stack/15.process.html">
          十五.process
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/web-node/assets/js/app.31e349f9.js" defer></script><script src="/web-node/assets/js/2.cae3d5ca.js" defer></script><script src="/web-node/assets/js/3.e73902ef.js" defer></script>
  </body>
</html>
